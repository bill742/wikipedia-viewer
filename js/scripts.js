var output,searchArticle;output="",searchArticle=function(){var e;return e=search.value,e=e.replace(/\s+/g,"%20"),""===e?$(".search-container").before("<p class='error'>Please enter a search query</p>"):($("p.error").hide(),$("#output").empty(),$.ajax({type:"GET",url:"https://en.wikipedia.org/w/api.php?action=query&format=json&prop=pageimages|extracts&generator=search&formatversion=1&pilimit=50&exsentences=1&exlimit=20&exintro=1&explaintext=1&gsrnamespace=0&gsrsearch="+e+"&gsrlimit=10&callback=?",contentType:"application/json; charset=utf-8",async:!1,dataType:"json",success:function(e,t,r){var a,u;return e.hasOwnProperty("query")?(u=e.query.pages,a=Object.keys(u).map(function(e){return u[e]}),$(".read-more").remove(),$(".output").removeClass("output-visible"),a.forEach(function(e){return document.getElementById("output").innerHTML+="<div class='box'><h3>"+e.title+"</h3><p>"+e.extract+"</p><p class='read-more'><a href='https://en.wikipedia.org/?curid="+e.pageid+"' target='_blank'>Read More &gt;&gt;</a></p></div>"})):($(".output").addClass("output-visible"),output="<p>No results found.</p>",document.getElementById("output").innerHTML=output)},error:function(e){return $(".output").addClass("output-visible"),output="<p>No results found.</p>",document.getElementById("output").innerHTML=output}}))},$("#search").keypress(function(){if(13===event.keyCode||13===event.which)return searchArticle()}),$(".clear").click(function(){return $("#search").val("")});
$(".random").click(function(){return $("#output").empty(),$.ajax({type:"GET",url:"http://en.wikipedia.org/w/api.php?action=query&generator=random&grnnamespace=0&prop=extracts&exchars=500&format=json&rnlimit=1&callback=?",contentType:"application/json; charset=utf-8",async:!1,dataType:"json",success:function(t,e,r){var n,a,o,p,i,c,u,s,d;return s=t.query.pages,c=Object.keys(s).map(function(t){return s[t]}),d=c[0],a=d.title,p=d.extract,o=$(p).find("p"),i=o.prevObject[0].innerHTML,n=d.pageid,$(".output").addClass("output-visible"),u="<h3>"+a+"</h3>",u+="<p>"+i+"</p>",u+='<p class="read-more"><a href="http://en.wikipedia.org/wiki?curid='+n+'" target="_blank">Read More &gt;&gt;</a></p>',document.getElementById("output").innerHTML=u,{error:function(t){return console.log("No article found")}}}})});